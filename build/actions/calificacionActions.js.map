{"version":3,"sources":["../../src/actions/calificacionActions.js"],"names":["calificarRepartidor","calificacion","calificacionValida","estrellas","CalificacionModel","create","calificacionRep","filter","_id","repartidor","update","$push","calificaciones","module","exports"],"mappings":";;;;;;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG,iBAAOC,YAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAExB;AACMC,YAAAA,kBAHkB,qBAGQD,YAHR;AAGsBE,cAAAA,SAAS,EAAEF,YAAY,CAACE,SAAb,GAAyB,CAAzB,GAA6B,CAA7B,GAAiCF,YAAY,CAACE;AAH/E;AAAA;AAAA,mBAKMC,0BAAkBC,MAAlB,CAAyBH,kBAAzB,CALN;;AAAA;AAKlBI,YAAAA,eALkB;AAMlBC,YAAAA,MANkB,GAMT;AAAEC,cAAAA,GAAG,EAAEP,YAAY,CAACQ;AAApB,aANS;AAOlBC,YAAAA,MAPkB,GAOT;AAAEC,cAAAA,KAAK,EAAE;AAAEC,gBAAAA,cAAc,EAAEN,eAAe,CAACE;AAAlC;AAAT,aAPS;AAAA;AAAA,mBAQlB,yCAAiBD,MAAjB,EAAyBG,MAAzB,CARkB;;AAAA;AAAA,6CASjBJ,eATiB;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAnBN,mBAAmB;AAAA;AAAA;AAAA,GAAzB;;AAeAa,MAAM,CAACC,OAAP,GAAiB;AACfd,EAAAA,mBAAmB,EAAnBA;AADe,CAAjB","sourcesContent":["import { CalificacionModel } from '../database/models'\r\nimport { updateRepartidor } from '../actions/repartidorActions'\r\n\r\nconst calificarRepartidor = async (calificacion) => {\r\n  try {\r\n    // Si se intenta enviar una calificacion mayor a las 5 estrellas se cambia al maximo posible \"5\"\r\n    const calificacionValida = { ...calificacion, estrellas: calificacion.estrellas > 5 ? 5 : calificacion.estrellas }\r\n\r\n    const calificacionRep = await CalificacionModel.create(calificacionValida)\r\n    const filter = { _id: calificacion.repartidor }\r\n    const update = { $push: { calificaciones: calificacionRep._id } }\r\n    await updateRepartidor(filter, update)\r\n    return calificacionRep\r\n  } catch (error) {\r\n    return error\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  calificarRepartidor\r\n}\r\n"],"file":"calificacionActions.js"}