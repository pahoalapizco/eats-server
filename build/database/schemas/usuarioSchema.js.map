{"version":3,"sources":["../../../src/database/schemas/usuarioSchema.js"],"names":["Schema","mongoose","userSchema","name","type","String","required","lastname","email","unique","password","phonenumber","img","timestamps","Types","ObjectId","prototype","valueOf","toString","pre","next","user","bcrypt","genSalt","error","salt","hash","module","exports"],"mappings":"AAAA;;;;;;;;;AAEA;;AACA;;AAEA,IAAMA,MAAM,GAAGC,qBAASD,MAAxB;AAEO,IAAME,UAAU,GAAG,IAAIF,MAAJ,CAAW;AACnCG,EAAAA,IAAI,EAAE;AACJC,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAE;AAFN,GAD6B;AAKnCC,EAAAA,QAAQ,EAAE;AACRH,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,QAAQ,EAAE;AAFF,GALyB;AASnCE,EAAAA,KAAK,EAAE;AACLJ,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,QAAQ,EAAE,IAFL;AAGLG,IAAAA,MAAM,EAAE;AAHH,GAT4B;AAcnCC,EAAAA,QAAQ,EAAE;AACRN,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,QAAQ,EAAE;AAFF,GAdyB;AAkBnCK,EAAAA,WAAW,EAAE;AACXP,IAAAA,IAAI,EAAEC;AADK,GAlBsB;AAqBnCO,EAAAA,GAAG,EAAE;AACHR,IAAAA,IAAI,EAAEC;AADH;AArB8B,CAAX,EAwBvB;AAAEQ,EAAAA,UAAU,EAAE;AAAd,CAxBuB,CAAnB;;;AA0BPZ,qBAASa,KAAT,CAAeC,QAAf,CAAwBC,SAAxB,CAAkCC,OAAlC,GAA4C,YAAY;AACtD,SAAO,KAAKC,QAAL,EAAP;AACD,CAFD;;AAIAhB,UAAU,CAACiB,GAAX,CAAe,MAAf,EAAuB,UAAUC,IAAV,EAAgB;AACrC,MAAMC,IAAI,GAAG,IAAb;;AACAC,qBAAOC,OAAP,CAAe,EAAf,EAAmB,UAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACxCH,uBAAOI,IAAP,CAAYL,IAAI,CAACX,QAAjB,EAA2Be,IAA3B,EAAiC,UAAUD,KAAV,EAAiBE,IAAjB,EAAuB;AACtD,UAAIF,KAAJ,EAAW;AAAE,eAAOJ,IAAI,CAACI,KAAD,CAAX;AAAoB;;AACjCH,MAAAA,IAAI,CAACX,QAAL,GAAgBgB,IAAhB;AACAN,MAAAA,IAAI;AACL,KAJD;AAKD,GAND;AAOD,CATD;AAWAO,MAAM,CAACC,OAAP,GAAiB1B,UAAjB","sourcesContent":["'use strict'\r\n\r\nimport mongoose from 'mongoose'\r\nimport bcrypt from 'bcrypt'\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nexport const userSchema = new Schema({\r\n  name: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  lastname: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  email: {\r\n    type: String,\r\n    required: true,\r\n    unique: true\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  phonenumber: {\r\n    type: String\r\n  },\r\n  img: {\r\n    type: String\r\n  }\r\n}, { timestamps: true })\r\n\r\nmongoose.Types.ObjectId.prototype.valueOf = function () {\r\n  return this.toString()\r\n}\r\n\r\nuserSchema.pre('save', function (next) {\r\n  const user = this\r\n  bcrypt.genSalt(10, function (error, salt) {\r\n    bcrypt.hash(user.password, salt, function (error, hash) {\r\n      if (error) { return next(error) }\r\n      user.password = hash\r\n      next()\r\n    })\r\n  })\r\n})\r\n\r\nmodule.exports = userSchema\r\n"],"file":"usuarioSchema.js"}